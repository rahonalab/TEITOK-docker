version: "2"
services:
  cqp:
   image: rahonabe/cqp
   env_file: ./secrets.env
   links:
        - sql
   domainname: ${DOMAINNAME}
   hostname: ${FIRSTNAME}-cqp
   build: 
      context: ./cqp
   ports:
       - 80:80
   volumes:
       - ./${FIRSTNAME}-container/etc/apache2:/etc/apache2
       - ./${FIRSTNAME}-container/corpora:/var/corpora
       - ./${FIRSTNAME}-container/www:/var/www
       - ./${FIRSTNAME}-container/registry:/usr/local/share/cwb/registry
   volumes_from:
       - sql
  sql:
    image: mariadb
    env_file: ./secrets.env
    domainname: ${DOMAINNAME}
    hostname: ${FIRSTNAME}-sql
    volumes:
      - ./${FIRSTNAME}-container/lib/mysql:/var/lib/mysql
